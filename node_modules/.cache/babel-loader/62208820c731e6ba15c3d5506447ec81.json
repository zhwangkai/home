{"ast":null,"code":"var _jsxFileName = \"/Users/wsm/Documents/workshop/home/src/cps/homepage/homepage.js\";\nimport React, { Component } from 'react';\n\nclass Homepage extends Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cp cp-homepage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 7,\n        columnNumber: 4\n      }\n    }, \" Homepage \");\n  }\n\n  constructor() {\n    super();\n    this.state = {\n      rayCount: 500,\n      rayPropCount: 8,\n      rayPropsLength: 4000,\n      baseLength: 200,\n      rangeLength: 200,\n      baseSpeed: 0.05,\n      rangeSpeed: 0.1,\n      baseWidth: 10,\n      rangeWidth: 20,\n      baseHue: 120,\n      rangeHue: 60,\n      baseTTL: 50,\n      rangeTTL: 100,\n      noiseStrength: 100,\n      xOff: 0.0015,\n      yOff: 0.0015,\n      zOff: 0.0015,\n      backgroundColor: 'hsla(220,60%,3%,1)',\n      container: \"\",\n      canvas: {},\n      ctx: {},\n      center: [],\n      tick: 0,\n      simplex: {},\n      rayProps: {}\n    };\n    this.setState(() => ({\n      rayPropsLength: __this.state.rayCount * __this.state.rayPropCount\n    }));\n\n    let __this = this;\n  }\n\n  componentDidMount() {\n    window.addEventListener('load', this.setup());\n    window.addEventListener('resize', this.resize());\n  }\n\n  _setup() {\n    this.createCanvas();\n    this.resize();\n    this.initRays();\n    this.draw();\n  }\n\n  _initRays() {\n    this.state.simplex = new simplexNoise();\n    this.state.rayProps = new Float32Array(this.state.rayPropsLength);\n    let i;\n\n    for (i = 0; i < this.state.rayPropsLength; i += this.state.rayPropCount) {\n      this.initRay(i);\n    }\n  }\n\n  _initRay(i) {\n    let length, x, y1, y2, n, life, ttl, width, speed, hue;\n    length = this.state.baseLength + rand(this.state.rangeLength);\n    x = rand(this.state.canvas.a.width);\n    y1 = center[1] + noiseStrength;\n    y2 = center[1] + noiseStrength - length;\n    n = this.state.simplex.noise3D(x * xOff, y1 * yOff, tick * zOff) * this.state.noiseStrength;\n    y1 += n;\n    y2 += n;\n    life = 0;\n    ttl = baseTTL + rand(rangeTTL);\n    width = baseWidth + rand(rangeWidth);\n    speed = baseSpeed + rand(rangeSpeed) * (round(rand(1)) ? 1 : -1);\n    hue = baseHue + rand(rangeHue);\n    rayProps.set([x, y1, y2, life, ttl, width, speed, hue], i);\n  }\n\n  _drawRays() {\n    let i;\n\n    for (i = 0; i < rayPropsLength; i += rayPropCount) {\n      updateRay(i);\n    }\n  }\n\n  _updateRay(i) {\n    let i2 = 1 + i,\n        i3 = 2 + i,\n        i4 = 3 + i,\n        i5 = 4 + i,\n        i6 = 5 + i,\n        i7 = 6 + i,\n        i8 = 7 + i;\n    let x, y1, y2, life, ttl, width, speed, hue;\n    x = rayProps[i];\n    y1 = rayProps[i2];\n    y2 = rayProps[i3];\n    life = rayProps[i4];\n    ttl = rayProps[i5];\n    width = rayProps[i6];\n    speed = rayProps[i7];\n    hue = rayProps[i8];\n    drawRay(x, y1, y2, life, ttl, width, hue);\n    x += speed;\n    life++;\n    rayProps[i] = x;\n    rayProps[i4] = life;\n    (checkBounds(x) || life > ttl) && initRay(i);\n  }\n\n  _drawRay(x, y1, y2, life, ttl, width, hue) {\n    let gradient;\n    gradient = ctx.a.createLinearGradient(x, y1, x, y2);\n    gradient.addColorStop(0, `hsla(${hue},100%,65%,0)`);\n    gradient.addColorStop(0.5, `hsla(${hue},100%,65%,${fadeInOut(life, ttl)})`);\n    gradient.addColorStop(1, `hsla(${hue},100%,65%,0)`);\n    ctx.a.save();\n    ctx.a.beginPath();\n    ctx.a.strokeStyle = gradient;\n    ctx.a.lineWidth = width;\n    ctx.a.moveTo(x, y1);\n    ctx.a.lineTo(x, y2);\n    ctx.a.stroke();\n    ctx.a.closePath();\n    ctx.a.restore();\n  }\n\n  _checkBounds(x) {\n    return x < 0 || x > canvas.a.width;\n  }\n\n  _createCanvas() {\n    container = document.querySelector('.content--canvas');\n    canvas = {\n      a: document.createElement('canvas'),\n      b: document.createElement('canvas')\n    };\n    canvas.b.style = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n    `;\n    container.appendChild(canvas.b);\n    ctx = {\n      a: canvas.a.getContext('2d'),\n      b: canvas.b.getContext('2d')\n    };\n    center = [];\n  }\n\n  _resize() {\n    const {\n      innerWidth,\n      innerHeight\n    } = window;\n    canvas.a.width = innerWidth;\n    canvas.a.height = innerHeight;\n    ctx.a.drawImage(canvas.b, 0, 0);\n    canvas.b.width = innerWidth;\n    canvas.b.height = innerHeight;\n    ctx.b.drawImage(canvas.a, 0, 0);\n    center[0] = 0.5 * canvas.a.width;\n    center[1] = 0.5 * canvas.a.height;\n  }\n\n  _render() {\n    ctx.b.save();\n    ctx.b.filter = 'blur(12px)';\n    ctx.a.globalCompositeOperation = 'lighter';\n    ctx.b.drawImage(canvas.a, 0, 0);\n    ctx.b.restore();\n  }\n\n  _draw() {\n    tick++;\n    ctx.a.clearRect(0, 0, canvas.a.width, canvas.a.height);\n    ctx.b.fillStyle = backgroundColor;\n    ctx.b.fillRect(0, 0, canvas.b.width, canvas.a.height);\n    drawRays();\n    render();\n    window.requestAnimationFrame(draw);\n  }\n\n}\n\nexport default Homepage;","map":{"version":3,"sources":["/Users/wsm/Documents/workshop/home/src/cps/homepage/homepage.js"],"names":["React","Component","Homepage","render","constructor","state","rayCount","rayPropCount","rayPropsLength","baseLength","rangeLength","baseSpeed","rangeSpeed","baseWidth","rangeWidth","baseHue","rangeHue","baseTTL","rangeTTL","noiseStrength","xOff","yOff","zOff","backgroundColor","container","canvas","ctx","center","tick","simplex","rayProps","setState","__this","componentDidMount","window","addEventListener","setup","resize","_setup","createCanvas","initRays","draw","_initRays","simplexNoise","Float32Array","i","initRay","_initRay","length","x","y1","y2","n","life","ttl","width","speed","hue","rand","a","noise3D","round","set","_drawRays","updateRay","_updateRay","i2","i3","i4","i5","i6","i7","i8","drawRay","checkBounds","_drawRay","gradient","createLinearGradient","addColorStop","fadeInOut","save","beginPath","strokeStyle","lineWidth","moveTo","lineTo","stroke","closePath","restore","_checkBounds","_createCanvas","document","querySelector","createElement","b","style","appendChild","getContext","_resize","innerWidth","innerHeight","height","drawImage","_render","filter","globalCompositeOperation","_draw","clearRect","fillStyle","fillRect","drawRays","requestAnimationFrame"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\n\nclass Homepage extends Component {\n\n\trender() {\n\t\treturn ( \n\t\t\t<div className = 'cp cp-homepage' > Homepage </div>\n\t\t)\n\t}\n\tconstructor() {\n        super();\n        this.state = {\n        \trayCount: 500,\n        \trayPropCount: 8,\n        \trayPropsLength: 4000,\n\t\t\tbaseLength: 200,\n\t\t\trangeLength: 200,\n\t\t\tbaseSpeed: 0.05,\n\t\t\trangeSpeed: 0.1,\n\t\t\tbaseWidth: 10,\n\t\t\trangeWidth: 20,\n\t\t\tbaseHue: 120,\n\t\t\trangeHue: 60,\n\t\t\tbaseTTL: 50,\n\t\t\trangeTTL: 100,\n\t\t\tnoiseStrength: 100,\n\t\t\txOff: 0.0015,\n\t\t\tyOff: 0.0015,\n\t\t\tzOff: 0.0015,\n\t\t\tbackgroundColor: 'hsla(220,60%,3%,1)',\n\t\t\tcontainer: \"\",\n\t\t\tcanvas: {},\n\t\t\tctx: {},\n\t\t\tcenter:[],\n\t\t\ttick: 0,\n\t\t\tsimplex: {},\n\t\t\trayProps: {}\n        }\n\n\t\tthis.setState(() => ({\n\t\t\trayPropsLength: __this.state.rayCount * __this.state.rayPropCount\n\t\t}));\n\n\t\tlet __this = this;\n    }\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('load', this.setup());\n\t\twindow.addEventListener('resize', this.resize());\n\t}\n\n    _setup () {\n        this.createCanvas();\n        this.resize();\n        this.initRays();\n        this.draw();\n    }\n\n    _initRays () {\n        this.state.simplex = new simplexNoise();\n        this.state.rayProps = new Float32Array(this.state.rayPropsLength);\n\n        let i;\n\n        for (i = 0; i < this.state.rayPropsLength; i += this.state.rayPropCount) {\n            this.initRay(i);\n        }\n    }\n\n    _initRay (i) {\n        let length, x, y1, y2, n, life, ttl, width, speed, hue;\n\n        length = this.state.baseLength + rand(this.state.rangeLength);\n        x = rand(this.state.canvas.a.width);\n        y1 = center[1] + noiseStrength;\n        y2 = center[1] + noiseStrength - length;\n        n = this.state.simplex.noise3D(x * xOff, y1 * yOff, tick * zOff) * this.state.noiseStrength;\n        y1 += n;\n        y2 += n;\n        life = 0;\n        ttl = baseTTL + rand(rangeTTL);\n        width = baseWidth + rand(rangeWidth);\n        speed = baseSpeed + rand(rangeSpeed) * (round(rand(1)) ? 1 : -1);\n        hue = baseHue + rand(rangeHue);\n\n        rayProps.set([x, y1, y2, life, ttl, width, speed, hue], i);\n    }\n\n     _drawRays () {\n        let i;\n\n        for (i = 0; i < rayPropsLength; i += rayPropCount) {\n            updateRay(i);\n        }\n    }\n\n    _updateRay (i) {\n        let i2 = 1 + i,\n            i3 = 2 + i,\n            i4 = 3 + i,\n            i5 = 4 + i,\n            i6 = 5 + i,\n            i7 = 6 + i,\n            i8 = 7 + i;\n        let x, y1, y2, life, ttl, width, speed, hue;\n\n        x = rayProps[i];\n        y1 = rayProps[i2];\n        y2 = rayProps[i3];\n        life = rayProps[i4];\n        ttl = rayProps[i5];\n        width = rayProps[i6];\n        speed = rayProps[i7];\n        hue = rayProps[i8];\n\n        drawRay(x, y1, y2, life, ttl, width, hue);\n\n        x += speed;\n        life++;\n\n        rayProps[i] = x;\n        rayProps[i4] = life;\n\n        (checkBounds(x) || life > ttl) && initRay(i);\n    }\n\n    _drawRay (x, y1, y2, life, ttl, width, hue) {\n        let gradient;\n\n        gradient = ctx.a.createLinearGradient(x, y1, x, y2);\n        gradient.addColorStop(0, `hsla(${hue},100%,65%,0)`);\n        gradient.addColorStop(0.5, `hsla(${hue},100%,65%,${fadeInOut(life, ttl)})`);\n        gradient.addColorStop(1, `hsla(${hue},100%,65%,0)`);\n\n        ctx.a.save();\n        ctx.a.beginPath();\n        ctx.a.strokeStyle = gradient;\n        ctx.a.lineWidth = width;\n        ctx.a.moveTo(x, y1);\n        ctx.a.lineTo(x, y2);\n        ctx.a.stroke();\n        ctx.a.closePath();\n        ctx.a.restore();\n    }\n\n    _checkBounds (x) {\n        return x < 0 || x > canvas.a.width;\n    }\n\n    _createCanvas () {\n        container = document.querySelector('.content--canvas');\n        canvas = {\n            a: document.createElement('canvas'),\n            b: document.createElement('canvas')\n        };\n        canvas.b.style = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n    `;\n        container.appendChild(canvas.b);\n        ctx = {\n            a: canvas.a.getContext('2d'),\n            b: canvas.b.getContext('2d')\n        };\n        center = [];\n    }\n\n    _resize () {\n        const {\n            innerWidth,\n            innerHeight\n        } = window;\n\n        canvas.a.width = innerWidth;\n        canvas.a.height = innerHeight;\n\n        ctx.a.drawImage(canvas.b, 0, 0);\n\n        canvas.b.width = innerWidth;\n        canvas.b.height = innerHeight;\n\n        ctx.b.drawImage(canvas.a, 0, 0);\n\n        center[0] = 0.5 * canvas.a.width;\n        center[1] = 0.5 * canvas.a.height;\n    }\n\n    _render () {\n        ctx.b.save();\n        ctx.b.filter = 'blur(12px)';\n        ctx.a.globalCompositeOperation = 'lighter';\n        ctx.b.drawImage(canvas.a, 0, 0);\n        ctx.b.restore();\n    }\n\n    _draw () {\n        tick++;\n        ctx.a.clearRect(0, 0, canvas.a.width, canvas.a.height);\n        ctx.b.fillStyle = backgroundColor;\n        ctx.b.fillRect(0, 0, canvas.b.width, canvas.a.height);\n        drawRays();\n        render();\n\n        window.requestAnimationFrame(draw);\n    }\n}\nexport default Homepage;"]},"metadata":{},"sourceType":"module"}