{"ast":null,"code":"var _jsxFileName = \"/Users/wsm/Documents/workshop/home/src/cps/homepage/homepage.js\";\nimport React, { Component } from 'react';\n\nclass Homepage extends Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cp cp-homepage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 7,\n        columnNumber: 4\n      }\n    }, \" Homepage \");\n  }\n\n  constructor() {\n    super();\n\n    this.__setup = function () {\n      this.createCanvas();\n      this.resize();\n      this.initRays();\n      this.draw();\n    };\n\n    this.__initRays = function () {\n      this.state.simplex = new simplexNoise();\n      this.state.rayProps = new Float32Array(this.state.rayPropsLength);\n      let i;\n\n      for (i = 0; i < this.state.rayPropsLength; i += this.state.rayPropCount) {\n        this.initRay(i);\n      }\n    };\n\n    this.__initRay = function (i) {\n      let length, x, y1, y2, n, life, ttl, width, speed, hue;\n      length = this.state.baseLength + rand(this.state.rangeLength);\n      x = rand(this.state.canvas.a.width);\n      y1 = center[1] + noiseStrength;\n      y2 = center[1] + noiseStrength - length;\n      n = this.state.simplex.noise3D(x * xOff, y1 * yOff, tick * zOff) * this.state.noiseStrength;\n      y1 += n;\n      y2 += n;\n      life = 0;\n      ttl = baseTTL + rand(rangeTTL);\n      width = baseWidth + rand(rangeWidth);\n      speed = baseSpeed + rand(rangeSpeed) * (round(rand(1)) ? 1 : -1);\n      hue = baseHue + rand(rangeHue);\n      rayProps.set([x, y1, y2, life, ttl, width, speed, hue], i);\n    };\n\n    this.__drawRays = function () {\n      let i;\n\n      for (i = 0; i < rayPropsLength; i += rayPropCount) {\n        updateRay(i);\n      }\n    };\n\n    this.__updateRay = function (i) {\n      let i2 = 1 + i,\n          i3 = 2 + i,\n          i4 = 3 + i,\n          i5 = 4 + i,\n          i6 = 5 + i,\n          i7 = 6 + i,\n          i8 = 7 + i;\n      let x, y1, y2, life, ttl, width, speed, hue;\n      x = rayProps[i];\n      y1 = rayProps[i2];\n      y2 = rayProps[i3];\n      life = rayProps[i4];\n      ttl = rayProps[i5];\n      width = rayProps[i6];\n      speed = rayProps[i7];\n      hue = rayProps[i8];\n      drawRay(x, y1, y2, life, ttl, width, hue);\n      x += speed;\n      life++;\n      rayProps[i] = x;\n      rayProps[i4] = life;\n      (checkBounds(x) || life > ttl) && initRay(i);\n    };\n\n    this.__drawRay = function (x, y1, y2, life, ttl, width, hue) {\n      let gradient;\n      gradient = ctx.a.createLinearGradient(x, y1, x, y2);\n      gradient.addColorStop(0, `hsla(${hue},100%,65%,0)`);\n      gradient.addColorStop(0.5, `hsla(${hue},100%,65%,${fadeInOut(life, ttl)})`);\n      gradient.addColorStop(1, `hsla(${hue},100%,65%,0)`);\n      ctx.a.save();\n      ctx.a.beginPath();\n      ctx.a.strokeStyle = gradient;\n      ctx.a.lineWidth = width;\n      ctx.a.moveTo(x, y1);\n      ctx.a.lineTo(x, y2);\n      ctx.a.stroke();\n      ctx.a.closePath();\n      ctx.a.restore();\n    };\n\n    this.__checkBounds = function (x) {\n      return x < 0 || x > canvas.a.width;\n    };\n\n    this.__createCanvas = function () {\n      container = document.querySelector('.content--canvas');\n      canvas = {\n        a: document.createElement('canvas'),\n        b: document.createElement('canvas')\n      };\n      canvas.b.style = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n    `;\n      container.appendChild(canvas.b);\n      ctx = {\n        a: canvas.a.getContext('2d'),\n        b: canvas.b.getContext('2d')\n      };\n      center = [];\n    };\n\n    this.__resize = function () {\n      const {\n        innerWidth,\n        innerHeight\n      } = window;\n      canvas.a.width = innerWidth;\n      canvas.a.height = innerHeight;\n      ctx.a.drawImage(canvas.b, 0, 0);\n      canvas.b.width = innerWidth;\n      canvas.b.height = innerHeight;\n      ctx.b.drawImage(canvas.a, 0, 0);\n      center[0] = 0.5 * canvas.a.width;\n      center[1] = 0.5 * canvas.a.height;\n    };\n\n    this.state = {\n      rayCount: 500,\n      rayPropCount: 8,\n      rayPropsLength: 4000,\n      baseLength: 200,\n      rangeLength: 200,\n      baseSpeed: 0.05,\n      rangeSpeed: 0.1,\n      baseWidth: 10,\n      rangeWidth: 20,\n      baseHue: 120,\n      rangeHue: 60,\n      baseTTL: 50,\n      rangeTTL: 100,\n      noiseStrength: 100,\n      xOff: 0.0015,\n      yOff: 0.0015,\n      zOff: 0.0015,\n      backgroundColor: 'hsla(220,60%,3%,1)',\n      container: \"\",\n      canvas: {},\n      ctx: {},\n      center: [],\n      tick: 0,\n      simplex: {},\n      rayProps: {}\n    };\n    this.setState(() => ({\n      rayPropsLength: __this.state.rayCount * __this.state.rayPropCount\n    }));\n\n    let __this = this;\n  }\n\n  componentDidMount() {\n    window.addEventListener('load', this.setup());\n    window.addEventListener('resize', this.resize());\n  }\n\n  _render() {\n    ctx.b.save();\n    ctx.b.filter = 'blur(12px)';\n    ctx.a.globalCompositeOperation = 'lighter';\n    ctx.b.drawImage(canvas.a, 0, 0);\n    ctx.b.restore();\n  }\n\n  _draw() {\n    tick++;\n    ctx.a.clearRect(0, 0, canvas.a.width, canvas.a.height);\n    ctx.b.fillStyle = backgroundColor;\n    ctx.b.fillRect(0, 0, canvas.b.width, canvas.a.height);\n    drawRays();\n    render();\n    window.requestAnimationFrame(draw);\n  }\n\n}\n\nexport default Homepage;","map":{"version":3,"sources":["/Users/wsm/Documents/workshop/home/src/cps/homepage/homepage.js"],"names":["React","Component","Homepage","render","constructor","__setup","createCanvas","resize","initRays","draw","__initRays","state","simplex","simplexNoise","rayProps","Float32Array","rayPropsLength","i","rayPropCount","initRay","__initRay","length","x","y1","y2","n","life","ttl","width","speed","hue","baseLength","rand","rangeLength","canvas","a","center","noiseStrength","noise3D","xOff","yOff","tick","zOff","baseTTL","rangeTTL","baseWidth","rangeWidth","baseSpeed","rangeSpeed","round","baseHue","rangeHue","set","__drawRays","updateRay","__updateRay","i2","i3","i4","i5","i6","i7","i8","drawRay","checkBounds","__drawRay","gradient","ctx","createLinearGradient","addColorStop","fadeInOut","save","beginPath","strokeStyle","lineWidth","moveTo","lineTo","stroke","closePath","restore","__checkBounds","__createCanvas","container","document","querySelector","createElement","b","style","appendChild","getContext","__resize","innerWidth","innerHeight","window","height","drawImage","rayCount","backgroundColor","setState","__this","componentDidMount","addEventListener","setup","_render","filter","globalCompositeOperation","_draw","clearRect","fillStyle","fillRect","drawRays","requestAnimationFrame"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\n\nclass Homepage extends Component {\n\n\trender() {\n\t\treturn ( \n\t\t\t<div className = 'cp cp-homepage' > Homepage </div>\n\t\t)\n\t}\n\tconstructor() {\n        super();\n        this.state = {\n        \trayCount: 500,\n        \trayPropCount: 8,\n        \trayPropsLength: 4000,\n\t\t\tbaseLength: 200,\n\t\t\trangeLength: 200,\n\t\t\tbaseSpeed: 0.05,\n\t\t\trangeSpeed: 0.1,\n\t\t\tbaseWidth: 10,\n\t\t\trangeWidth: 20,\n\t\t\tbaseHue: 120,\n\t\t\trangeHue: 60,\n\t\t\tbaseTTL: 50,\n\t\t\trangeTTL: 100,\n\t\t\tnoiseStrength: 100,\n\t\t\txOff: 0.0015,\n\t\t\tyOff: 0.0015,\n\t\t\tzOff: 0.0015,\n\t\t\tbackgroundColor: 'hsla(220,60%,3%,1)',\n\t\t\tcontainer: \"\",\n\t\t\tcanvas: {},\n\t\t\tctx: {},\n\t\t\tcenter:[],\n\t\t\ttick: 0,\n\t\t\tsimplex: {},\n\t\t\trayProps: {}\n        }\n\n\t\tthis.setState(() => ({\n\t\t\trayPropsLength: __this.state.rayCount * __this.state.rayPropCount\n\t\t}));\n\n\t\tlet __this = this;\n    }\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('load', this.setup());\n\t\twindow.addEventListener('resize', this.resize());\n\t}\n\n     __setup = function() {\n        this.createCanvas();\n        this.resize();\n        this.initRays();\n        this.draw();\n    }\n\n    __initRays = function() {\n        this.state.simplex = new simplexNoise();\n        this.state.rayProps = new Float32Array(this.state.rayPropsLength);\n\n        let i;\n\n        for (i = 0; i < this.state.rayPropsLength; i += this.state.rayPropCount) {\n            this.initRay(i);\n        }\n    }\n\n    __initRay = function(i) {\n        let length, x, y1, y2, n, life, ttl, width, speed, hue;\n\n        length = this.state.baseLength + rand(this.state.rangeLength);\n        x = rand(this.state.canvas.a.width);\n        y1 = center[1] + noiseStrength;\n        y2 = center[1] + noiseStrength - length;\n        n = this.state.simplex.noise3D(x * xOff, y1 * yOff, tick * zOff) * this.state.noiseStrength;\n        y1 += n;\n        y2 += n;\n        life = 0;\n        ttl = baseTTL + rand(rangeTTL);\n        width = baseWidth + rand(rangeWidth);\n        speed = baseSpeed + rand(rangeSpeed) * (round(rand(1)) ? 1 : -1);\n        hue = baseHue + rand(rangeHue);\n\n        rayProps.set([x, y1, y2, life, ttl, width, speed, hue], i);\n    }\n\n     __drawRays = function() {\n        let i;\n\n        for (i = 0; i < rayPropsLength; i += rayPropCount) {\n            updateRay(i);\n        }\n    }\n\n    __updateRay = function(i) {\n        let i2 = 1 + i,\n            i3 = 2 + i,\n            i4 = 3 + i,\n            i5 = 4 + i,\n            i6 = 5 + i,\n            i7 = 6 + i,\n            i8 = 7 + i;\n        let x, y1, y2, life, ttl, width, speed, hue;\n\n        x = rayProps[i];\n        y1 = rayProps[i2];\n        y2 = rayProps[i3];\n        life = rayProps[i4];\n        ttl = rayProps[i5];\n        width = rayProps[i6];\n        speed = rayProps[i7];\n        hue = rayProps[i8];\n\n        drawRay(x, y1, y2, life, ttl, width, hue);\n\n        x += speed;\n        life++;\n\n        rayProps[i] = x;\n        rayProps[i4] = life;\n\n        (checkBounds(x) || life > ttl) && initRay(i);\n    }\n\n    __drawRay = function(x, y1, y2, life, ttl, width, hue) {\n        let gradient;\n\n        gradient = ctx.a.createLinearGradient(x, y1, x, y2);\n        gradient.addColorStop(0, `hsla(${hue},100%,65%,0)`);\n        gradient.addColorStop(0.5, `hsla(${hue},100%,65%,${fadeInOut(life, ttl)})`);\n        gradient.addColorStop(1, `hsla(${hue},100%,65%,0)`);\n\n        ctx.a.save();\n        ctx.a.beginPath();\n        ctx.a.strokeStyle = gradient;\n        ctx.a.lineWidth = width;\n        ctx.a.moveTo(x, y1);\n        ctx.a.lineTo(x, y2);\n        ctx.a.stroke();\n        ctx.a.closePath();\n        ctx.a.restore();\n    }\n\n    __checkBounds = function(x) {\n        return x < 0 || x > canvas.a.width;\n    }\n\n    __createCanvas = function() {\n        container = document.querySelector('.content--canvas');\n        canvas = {\n            a: document.createElement('canvas'),\n            b: document.createElement('canvas')\n        };\n        canvas.b.style = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n    `;\n        container.appendChild(canvas.b);\n        ctx = {\n            a: canvas.a.getContext('2d'),\n            b: canvas.b.getContext('2d')\n        };\n        center = [];\n    }\n\n    __resize = function() {\n        const {\n            innerWidth,\n            innerHeight\n        } = window;\n\n        canvas.a.width = innerWidth;\n        canvas.a.height = innerHeight;\n\n        ctx.a.drawImage(canvas.b, 0, 0);\n\n        canvas.b.width = innerWidth;\n        canvas.b.height = innerHeight;\n\n        ctx.b.drawImage(canvas.a, 0, 0);\n\n        center[0] = 0.5 * canvas.a.width;\n        center[1] = 0.5 * canvas.a.height;\n    }\n\n    _render () {\n        ctx.b.save();\n        ctx.b.filter = 'blur(12px)';\n        ctx.a.globalCompositeOperation = 'lighter';\n        ctx.b.drawImage(canvas.a, 0, 0);\n        ctx.b.restore();\n    }\n\n    _draw () {\n        tick++;\n        ctx.a.clearRect(0, 0, canvas.a.width, canvas.a.height);\n        ctx.b.fillStyle = backgroundColor;\n        ctx.b.fillRect(0, 0, canvas.b.width, canvas.a.height);\n        drawRays();\n        render();\n\n        window.requestAnimationFrame(draw);\n    }\n}\nexport default Homepage;"]},"metadata":{},"sourceType":"module"}